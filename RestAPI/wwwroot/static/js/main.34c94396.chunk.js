(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,a,t){e.exports=t(336)},162:function(e,a,t){},174:function(e,a,t){},175:function(e,a,t){},328:function(e,a,t){},329:function(e,a,t){},333:function(e,a,t){},334:function(e,a,t){},335:function(e,a,t){},336:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(3),l=t.n(c),i=(t(162),t(163),t(155)),s=(t(134),t(77)),o=(t(337),t(52)),m=(t(83),t(36)),u=(t(82),t(13)),d=(t(107),t(76)),f=t(102),v=t.n(f),E=(t(172),t(106)),h=t(78),p=t(135),w=t(51),b=function(e,a){return fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({movieId:a},e))}).then((function(e){if(!e.ok)throw new Error("Failed to add review")}))},g=(t(174),t(175),function(e){var a=e.info;return r.a.createElement("div",{className:"review"},r.a.createElement("h3",null,"Review by ",a.author),r.a.createElement(s.a,{allowHalf:!0,defaultValue:a.rating,disabled:!0,className:"rating"}),r.a.createElement("div",{className:"desc"},'"',a.description,'"'))}),N=t(32),j=function(){var e=Object(n.useState)(null),a=Object(w.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)([]),f=Object(w.a)(l,2),j=f[0],y=f[1],O=Object(n.useState)(!1),I=Object(w.a)(O,2),S=I[0],R=I[1],k=Object(N.g)().movieId;Object(n.useEffect)((function(){(function(e){return fetch("/api/movies/".concat(e)).then((function(e){return e.json()}))})(k).then((function(e){c(e)})),function(e){return fetch("/api/reviews/".concat(e)).then((function(e){return e.json()}))}(k).then((function(e){y(e.sort((function(e,a){return a.reviewId-e.reviewId})))}))}),[k]);var x=function(){var e=Object(p.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(a,parseInt(k)).then((function(){R(!1);var e=Object(h.a)({},a,{reviewId:j.length>0?j[0].reviewId+1:1});y([e].concat(j)),E.a.success("Review added!")})).catch((function(e){E.a.error("Failed to add review")}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return t&&j?r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"description"},r.a.createElement("img",{alt:"casino royale poster",src:"https://image.tmdb.org/t/p/w342/".concat(t.poster_Path)}),r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,t.title),r.a.createElement("div",{className:"tag"},t.tagline),r.a.createElement("div",{className:"plot"},t.overview))),r.a.createElement(d.a,{style:{backgroundColor:"#9ab"}}),r.a.createElement("div",{className:"reviews"},r.a.createElement("div",{className:"reviews-header"},r.a.createElement("h2",null,"Reviews"),r.a.createElement(u.a,{type:"primary",onClick:function(){return R(!0)}},"Add Review")),j.length>0?j.map((function(e){return r.a.createElement(g,{info:e,key:e.reviewId})})):r.a.createElement("div",null,"No reviews added yet")),r.a.createElement(i.a,{visible:S,onCancel:function(){return R(!1)},title:"Add a review",footer:null},r.a.createElement(o.a,{labelCol:{span:5},wrapperCol:{span:19},name:"addReview",onFinish:x},r.a.createElement(o.a.Item,{label:"Your name",name:"author",rules:[{required:!0,message:"Please enter a username"}]},r.a.createElement(m.a,null)),r.a.createElement(o.a.Item,{label:"Rating",name:"rating",rules:[{required:!0,message:"Please select a rating"}]},r.a.createElement(s.a,{allowHalf:!0})),r.a.createElement(o.a.Item,{label:"Details",name:"description",rules:[{required:!0,message:"Please enter your review"}]},r.a.createElement(m.a.TextArea,{autoSize:{minRows:5,maxRows:15}})),r.a.createElement(o.a.Item,{wrapperCol:{offset:5,span:19}},r.a.createElement(u.a,{type:"primary",htmlType:"submit"},"Submit Review"))))):""},y=(t(326),t(153)),O=(t(328),t(23)),I=function(e){var a=e.details;return r.a.createElement("div",{className:"result-card"},r.a.createElement(O.b,{to:"/movies/".concat(a.id)},a.poster_Path&&r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w342/".concat(a.poster_Path),alt:a.title}),r.a.createElement("h2",null,a.title),r.a.createElement("div",{className:"release-date"},a.release_Date)))},S=(t(329),function(){var e=Object(n.useState)(null),a=Object(w.a)(e,2),t=a[0],c=a[1],l=Object(N.g)().query;return Object(n.useEffect)((function(){(function(e){return fetch("/api/movies/search/".concat(e)).then((function(e){return e.json()}))})(l).then((function(e){c(e.results)}))}),[l]),r.a.createElement("div",{className:"search"},r.a.createElement("h1",null,'Results for "',l,'"'),r.a.createElement("div",{className:"results"},t?t.map((function(e){return r.a.createElement(I,{details:e,key:e.id})})):r.a.createElement(y.a,{size:"large"})))}),R=(t(333),function(){var e=Object(N.f)();return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement(O.b,{to:"/"},r.a.createElement("div",{className:"nav-logo"},"FILM REVIEWS")),"/"===e.location.pathname||r.a.createElement("div",{className:"nav-search"},r.a.createElement(m.a.Search,{placeholder:"Search for a film",onSearch:function(a){a&&e.replace("/search/".concat(a))},style:{width:275}}))),r.a.createElement(d.a,{style:{margin:0}}))}),k=(t(334),function(){var e=Object(N.f)();return r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,"Find and Review Your Favorite Films"),r.a.createElement("div",{className:"home-search"},r.a.createElement(m.a.Search,{placeholder:"Search for a film...",enterButton:!0,size:"large",onSearch:function(a){a&&e.replace("/search/".concat(a))}})))});t(335);var x=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(O.a,null,r.a.createElement(R,null),r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:"/"},r.a.createElement(k,null)),r.a.createElement(N.a,{exact:!0,path:"/search/:query"},r.a.createElement(S,null)),r.a.createElement(N.a,{exact:!0,path:"/movies/:movieId"},r.a.createElement(j,null)))))};l.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.34c94396.chunk.js.map